<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Ideas | AFLplusplus</title>
<link rel="icon" href="/favicon.png" type="image/x-icon">

<meta property="og:title" content="Ideas | AFLplusplus" />
<meta name="twitter:title" content="Ideas | AFLplusplus" />
<meta itemprop="name" content="Ideas | AFLplusplus" />
<meta name="application-name" content="Ideas | AFLplusplus" />
<meta property="og:site_name" content="AFLplusplus" />

<meta name="description" content="The AFLplusplus website" />
<meta itemprop="description" content="The AFLplusplus website" />
<meta property="og:description" content="The AFLplusplus website" />
<meta name="twitter:description" content="The AFLplusplus website" />

<base href="https://aflplus.plus/docs/ideas/">
<link rel="canonical" href="https://aflplus.plus/docs/ideas/" itemprop="url" /> 
<meta name="url" content="https://aflplus.plus/docs/ideas/" />
<meta name="twitter:url" content="https://aflplus.plus/docs/ideas/" /> 
<meta property="og:url" content="https://aflplus.plus/docs/ideas/" />

 
  <meta itemprop="image" content="https://aflplus.plus/ogimage.png" />
  <meta property="og:image" content="https://aflplus.plus/ogimage.png" /> 
  <meta name="twitter:image" content="https://aflplus.plus/ogimage.png" />
  <meta name="twitter:image:src" content="https://aflplus.plus/ogimage.png" /> 



<link rel="stylesheet" href="/book.min.5f6934428064085210d9b92c20af9b09c67cef71f93fa65ebbc5af315512573d.css" integrity="sha256-X2k0QoBkCFIQ2bksIK&#43;bCcZ873H5P6Zeu8WvMVUSVz0=">


<script defer src="/en.search.min.753186ea4c7913aa30f0573d8822ba22bbc7819b74be61d0c089d31d7d84408b.js" integrity="sha256-dTGG6kx5E6ow8Fc9iCK6IrvHgZt0vmHQwInTHX2EQIs="></script>

<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><img src="/logo_256x256.png" alt="Logo" /><span>AFLplusplus</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>





  <ul>
<li><strong>Site map</strong>
<ul>
<li><a href="/features/">Features</a></li>
<li><a href="/building/">Build &amp; Install</a></li>
<li><a href="/docs/tutorials/">Tutorials</a></li>
<li><a href="/docs/">Documentation</a></li>
</ul>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li><strong>Downloads</strong>
<ul>
<li><a href="https://github.com/AFLplusplus/AFLplusplus/releases/tag/2.62c">Release 2.62c</a>
</li>
<li><a href="https://github.com/vanhauser-thc/AFLplusplus/releases">All releases</a></li>
<li><a href="https://github.com/vanhauser-thc/AFLplusplus/archive/master.zip">Current devel</a></li>
<li><a href="https://raw.githubusercontent.com/vanhauser-thc/AFLplusplus/master/docs/COPYING">License</a></li>
</ul>
</li>
<li><strong>Links</strong>
<ul>
<li><a href="https://github.com/vanhauser-thc/AFLplusplus">Repo (GitHub)</a></li>
<li><a href="https://groups.google.com/group/afl-users">Mailing list</a></li>
</ul>
</li>
</ul>





</nav>


<script>
(function() {
  var menu = document.querySelector("aside.book-menu nav");
  addEventListener("beforeunload", function(event) {
    localStorage.setItem("menu.scrollTop", menu.scrollTop);
  });
  menu.scrollTop = localStorage.getItem("menu.scrollTop");
})();
</script>

 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Ideas</strong>

  <label for="toc-control">
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#flexible-grammar-mutator">Flexible Grammar Mutator</a></li>
    <li><a href="#expand-on-the-mopt-mutator">Expand on the MOpt mutator</a></li>
    <li><a href="#perf-fuzz-linux-kernel-module">perf-fuzz Linux Kernel Module</a></li>
    <li><a href="#qemu-4-based-instrumentation">QEMU 4-based Instrumentation</a></li>
    <li><a href="#wasm-instrumentation">WASM Instrumentation</a></li>
    <li><a href="#machine-learning">Machine Learning</a></li>
    <li><a href="#reengineer-afl-fuzz-as-thread-safe-embeddable-library">Reengineer afl-fuzz as Thread Safe, Embeddable Library</a></li>
    <li><a href="#collision-free-binary-only-maps">Collision-free Binary-Only Maps</a></li>
    <li><a href="#your-idea">Your idea!</a></li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
<article class="markdown"><h1 id="ideas-for-afl">Ideas for afl++</h1>
<p>In the following, we describe a variety of ideas that could be implemented
for future AFL++ versions.</p>
<p>For GSOC2020 interested students please see
<a href="https://github.com/AFLplusplus/AFLplusplus/issues/208">https://github.com/AFLplusplus/AFLplusplus/issues/208</a></p>
<h2 id="flexible-grammar-mutator">Flexible Grammar Mutator</h2>
<p>Currently, AFL++'s mutation does not have deeper knowledge about the fuzzed
binary, apart from feedback, even though the developer may have insights
about the target.</p>
<p>A developer may choose to provide dictionaries and implement own mutations
in python or C, but an easy mutator that behaves according to a given grammar,
does not exist.</p>
<p>State-of-the-art research on grammar fuzzing has some problems in their
implementations like code quality, scalability, or ease of use and other
common issues of the academic code.</p>
<p>We aim to develop a pluggable grammar mutator for afl++ that combines
various results.</p>
<p>Mentor: andreafioraldi</p>
<h2 id="expand-on-the-mopt-mutator">Expand on the MOpt mutator</h2>
<p>Work on the MOpt mutator that is already in AFL++.</p>
<p>This is an excellent mutations scheduler based on Particle Swarm
Optimization but the current implementation schedule only the mutations
that were present on AFL.</p>
<p>AFL++ added a lot of optional mutators like the Input-2-State one based
on Redqueen, the Radamsa mutator, the Custom mutator (the user can define
its own mutator) and the work is to generalize MOpt for all the current
and future mutators.</p>
<p>Mentor: vanhauser-thc or andreafioraldi</p>
<h2 id="perf-fuzz-linux-kernel-module">perf-fuzz Linux Kernel Module</h2>
<p>Either Port the patch to the upcoming Ubuntu LTS 20.04 default kernel
and provide a qemu-kvm image or find a different userspace snapshot
solution that has a good performance and is reliable, e.g. with docker.
<a href="https://gts3.org/assets/papers/2017/xu:os-fuzz.pdf">perf-fuzz</a>
The perf-fuzz kernel can be found at <a href="https://github.com/sslab-gatech/perf-fuzz">https://github.com/sslab-gatech/perf-fuzz</a>
There also is/was a FreeBSD project at <a href="https://github.com/veracode-research/freebsd-perf-fuzz">https://github.com/veracode-research/freebsd-perf-fuzz</a></p>
<p>This enables snapshot fuzzing on Linux with an incredible performance!</p>
<p>Mentor: any
Idea/Issue tracker: <a href="https://github.com/AFLplusplus/AFLplusplus/issues/248">https://github.com/AFLplusplus/AFLplusplus/issues/248</a></p>
<h2 id="qemu-4-based-instrumentation">QEMU 4-based Instrumentation</h2>
<p>First tests to use QEMU 4 for binary-only AFL++ showed that caching behavior
changed, which vastly decreases fuzzing speeds.</p>
<p>This is the cause why, right now, we cannot switch to QEMU 4.2.</p>
<p>Understanding the current instrumentation and fixing the current caching
issues will be needed.</p>
<p>Mentor: andreafioraldi</p>
<h2 id="wasm-instrumentation">WASM Instrumentation</h2>
<p>Currently, AFL++ can be used for source code fuzzing and traditional binaries.
With the rise of WASM as compile target, however, a novel way of
instrumentation needs to be implemented for binaries compiled to Webassembly.
This can either be done by inserting instrumentation directly into the
WASM AST, or by patching feedback into a WASM VMs of choice, similar to
the current Unicorn instrumentation.</p>
<p>Mentor: any</p>
<h2 id="machine-learning">Machine Learning</h2>
<p>Something with machine learning, better than <a href="https://github.com/dongdongshe/neuzz">NEUZZ</a> :-)
Either improve a single mutator thorugh learning of many different bugs
(a bug class) or gather deep insights about a single target beforehand
(CFG, DFG, VFG, &hellip;?) and improve performance for a single target.</p>
<p>Mentor: domenukk</p>
<h2 id="reengineer-afl-fuzz-as-thread-safe-embeddable-library">Reengineer <code>afl-fuzz</code> as Thread Safe, Embeddable Library</h2>
<p>Right now, afl-fuzz is single threaded, cannot safely be embedded in tools,
and not multi-threaded. It makes use of a large number of globals, must always
be the parent process and exec child processes.
Instead, afl-fuzz could be refactored to contain no global state and globals.
This allows for different use cases that could be implemented during this
project.
Note that in the mean time a lot has happened here already, but e.g. making
it all work and implement multithreading in afl-fuzz &hellip; there is still quite
some work to do.</p>
<p>Mentor: hexcoder- or vanhauser-thc</p>
<h2 id="collision-free-binary-only-maps">Collision-free Binary-Only Maps</h2>
<p>AFL++ supports collison-free maps using an LTO (link-time-optimization) pass.
This should be possible to implement for QEMU and Unicorn instrumentations.
As the forkserver parent caches just in time translated translation blocks,
adding a simple counter between jumps should be doable.</p>
<p>Note: this is already in development for qemu by Andrea, so for people who
want to contribute it might make more sense to port his solution to unicorn.</p>
<p>Mentor: andreafioraldi or domenukk
Issue/idea tracker: <a href="https://github.com/AFLplusplus/AFLplusplus/issues/237">https://github.com/AFLplusplus/AFLplusplus/issues/237</a></p>
<h2 id="your-idea">Your idea!</h2>
<p>Finally, we are open to proposals!
Create an issue at <a href="https://github.com/AFLplusplus/AFLplusplus/issues">https://github.com/AFLplusplus/AFLplusplus/issues</a> and let&rsquo;s discuss :-)</p>
</article>
 

      <footer class="book-footer">
        
  <div class="flex justify-between">





</div>

 
        
  
  <div class="book-comments">

</div>
  
 
      </footer>
      
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#flexible-grammar-mutator">Flexible Grammar Mutator</a></li>
    <li><a href="#expand-on-the-mopt-mutator">Expand on the MOpt mutator</a></li>
    <li><a href="#perf-fuzz-linux-kernel-module">perf-fuzz Linux Kernel Module</a></li>
    <li><a href="#qemu-4-based-instrumentation">QEMU 4-based Instrumentation</a></li>
    <li><a href="#wasm-instrumentation">WASM Instrumentation</a></li>
    <li><a href="#machine-learning">Machine Learning</a></li>
    <li><a href="#reengineer-afl-fuzz-as-thread-safe-embeddable-library">Reengineer afl-fuzz as Thread Safe, Embeddable Library</a></li>
    <li><a href="#collision-free-binary-only-maps">Collision-free Binary-Only Maps</a></li>
    <li><a href="#your-idea">Your idea!</a></li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












