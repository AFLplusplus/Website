<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Features | AFLplusplus</title>
<link rel="icon" href="/favicon.png" type="image/x-icon">

<meta property="og:title" content="Features | AFLplusplus" />
<meta name="twitter:title" content="Features | AFLplusplus" />
<meta itemprop="name" content="Features | AFLplusplus" />
<meta name="application-name" content="Features | AFLplusplus" />
<meta property="og:site_name" content="AFLplusplus" />

<meta name="description" content="The AFLplusplus website" />
<meta itemprop="description" content="The AFLplusplus website" />
<meta property="og:description" content="The AFLplusplus website" />
<meta name="twitter:description" content="The AFLplusplus website" />

<base href="https://aflplus.plus/docs/features/">
<link rel="canonical" href="https://aflplus.plus/docs/features/" itemprop="url" /> 
<meta name="url" content="https://aflplus.plus/docs/features/" />
<meta name="twitter:url" content="https://aflplus.plus/docs/features/" /> 
<meta property="og:url" content="https://aflplus.plus/docs/features/" />

 
  <meta itemprop="image" content="https://aflplus.plus/ogimage.png" />
  <meta property="og:image" content="https://aflplus.plus/ogimage.png" /> 
  <meta name="twitter:image" content="https://aflplus.plus/ogimage.png" />
  <meta name="twitter:image:src" content="https://aflplus.plus/ogimage.png" /> 



<link rel="stylesheet" href="/book.min.5f6934428064085210d9b92c20af9b09c67cef71f93fa65ebbc5af315512573d.css" integrity="sha256-X2k0QoBkCFIQ2bksIK&#43;bCcZ873H5P6Zeu8WvMVUSVz0=">


<script defer src="/en.search.min.2121dd144f56093f39999e12ac94e2894ddc6fba97b269735113a9d4958a1a25.js" integrity="sha256-ISHdFE9WCT85mZ4SrJTiiU3cb7qXsmlzUROp1JWKGiU="></script>

<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><img src="/aflpp_logo_256x256_w.png" alt="Logo" /><span>AFLplusplus</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>





  <ul>
<li><strong>Site map</strong>
<ul>
<li><a href="/features/">Features</a></li>
<li><a href="/building/">Build &amp; Install</a></li>
<li><a href="/docs/">Documentation</a></li>
<li><a href="/docs/tutorials/">Tutorials</a></li>
<li><a href="/papers/">Papers</a></li>
<li><a href="https://aflplus.plus/libafl-book/">LibAFL Book</a></li>
</ul>
</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li><strong>Downloads</strong>
<ul>
<li><a href="https://github.com/AFLplusplus/AFLplusplus/releases/tag/v4.08c">Release 4.08c</a>
</li>
<li><a href="https://github.com/AFLplusplus/AFLplusplus/releases">All releases</a></li>
<li><a href="https://github.com/AFLplusplus/AFLplusplus/archive/master.zip">Current devel</a></li>
<li><a href="https://raw.githubusercontent.com/AFLplusplus/AFLplusplus/master/docs/COPYING">License</a></li>
</ul>
</li>
<li><strong>Links</strong>
<ul>
<li><a href="https://github.com/AFLplusplus/AFLplusplus">Repo (GitHub)</a></li>
<li><a href="https://opencollective.com/AFLplusplusEU">Donations</a></li>
<li><a href="https://groups.google.com/group/afl-users">Mailing list</a></li>
</ul>
</li>
</ul>





</nav>


<script>
(function() {
  var menu = document.querySelector("aside.book-menu nav");
  addEventListener("beforeunload", function(event) {
    localStorage.setItem("menu.scrollTop", menu.scrollTop);
  });
  menu.scrollTop = localStorage.getItem("menu.scrollTop");
})();
</script>

 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Features</strong>

  <label for="toc-control">
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#features-and-instrumentation">Features and instrumentation</a></li>
    <li><a href="#more-information-about-features">More information about features</a></li>
    <li><a href="#more-information-about-instrumentation">More information about instrumentation</a></li>
    <li><a href="#integrated-features-and-patches">Integrated features and patches</a></li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
<article class="markdown"><h1 id="important-features-of-afl">Important features of AFL++</h1>
<p>AFL++ supports llvm from 3.8 up to version 12, very fast binary fuzzing with
QEMU 5.1 with laf-intel and Redqueen, FRIDA mode, unicorn mode, gcc plugin, full
*BSD, Mac OS, Solaris and Android support and much, much, much more.</p>
<h2 id="features-and-instrumentation">Features and instrumentation</h2>
<table>
<thead>
<tr>
<th>Feature/Instrumentation</th>
<th align="center">afl-gcc</th>
<th align="center">llvm</th>
<th align="center">gcc_plugin</th>
<th align="center">FRIDA mode(9)</th>
<th align="center">QEMU mode(10)</th>
<th align="center">unicorn_mode(10)</th>
<th align="center">nyx_mode(12)</th>
<th align="center">coresight_mode(11)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Threadsafe counters [A]</td>
<td align="center"></td>
<td align="center">x(3)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">x</td>
<td align="center"></td>
</tr>
<tr>
<td>NeverZero           [B]</td>
<td align="center">x86[_64]</td>
<td align="center">x(1)</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td>Persistent Mode     [C]</td>
<td align="center"></td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">x86[_64]/arm64</td>
<td align="center">x86[_64]/arm[64]</td>
<td align="center">x</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td>LAF-Intel / CompCov [D]</td>
<td align="center"></td>
<td align="center">x</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">x86[_64]/arm[64]</td>
<td align="center">x86[_64]/arm[64]</td>
<td align="center">x86[_64]</td>
<td align="center"></td>
</tr>
<tr>
<td>CmpLog              [E]</td>
<td align="center"></td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">x86[_64]/arm64</td>
<td align="center">x86[_64]/arm[64]</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td>Selective Instrumentation [F]</td>
<td align="center"></td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td>Non-Colliding Coverage    [G]</td>
<td align="center"></td>
<td align="center">x(4)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">(x)(5)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td>Ngram prev_loc Coverage   [H]</td>
<td align="center"></td>
<td align="center">x(6)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td>Context Coverage    [I]</td>
<td align="center"></td>
<td align="center">x(6)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td>Auto Dictionary     [J]</td>
<td align="center"></td>
<td align="center">x(7)</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td>Snapshot Support    [K]</td>
<td align="center"></td>
<td align="center">(x)(8)</td>
<td align="center">(x)(8)</td>
<td align="center"></td>
<td align="center">(x)(5)</td>
<td align="center"></td>
<td align="center">x</td>
<td align="center"></td>
</tr>
<tr>
<td>Shared Memory Test cases  [L]</td>
<td align="center"></td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">x86[_64]/arm64</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center">x</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<h2 id="more-information-about-features">More information about features</h2>
<p>A. Default is not thread-safe coverage counter updates for better performance,
see <a href="https://github.com/AFLplusplus/AFLplusplus/blob/stable/docs/../instrumentation/README.llvm.md">instrumentation/README.llvm.md</a></p>
<p>B. On wrapping coverage counters (255 + 1), skip the 0 value and jump to 1
instead. This has shown to give better coverage data and is the default; see
<a href="https://github.com/AFLplusplus/AFLplusplus/blob/stable/docs/../instrumentation/README.llvm.md">instrumentation/README.llvm.md</a>.</p>
<p>C. Instead of forking, reiterate the fuzz target function in a loop (like
<code>LLVMFuzzerTestOneInput</code>. Great speed increase but only works with target
functions that do not keep state, leak memory, or exit; see
<a href="https://github.com/AFLplusplus/AFLplusplus/blob/stable/docs/../instrumentation/README.persistent_mode.md">instrumentation/README.persistent_mode.md</a></p>
<p>D. Split any non-8-bit comparison to 8-bit comparison; see
<a href="https://github.com/AFLplusplus/AFLplusplus/blob/stable/docs/../instrumentation/README.laf-intel.md">instrumentation/README.laf-intel.md</a></p>
<p>E. CmpLog is our enhanced
<a href="https://www.ndss-symposium.org/ndss-paper/redqueen-fuzzing-with-input-to-state-correspondence/">Redqueen</a>
implementation, see
<a href="https://github.com/AFLplusplus/AFLplusplus/blob/stable/docs/../instrumentation/README.cmplog.md">instrumentation/README.cmplog.md</a></p>
<p>F. Similar and compatible to clang 13+ sancov sanitize-coverage-allow/deny but
for all llvm versions and all our compile modes, only instrument what should
be instrumented, for more speed, directed fuzzing and less instability; see
<a href="https://github.com/AFLplusplus/AFLplusplus/blob/stable/docs/../instrumentation/README.instrument_list.md">instrumentation/README.instrument_list.md</a></p>
<p>G. Vanilla AFL uses coverage where edges could collide to the same coverage
bytes the larger the target is. Our default instrumentation in LTO and
afl-clang-fast (PCGUARD) uses non-colliding coverage that also makes it
faster. Vanilla AFL style is available with <code>AFL_LLVM_INSTRUMENT=AFL</code>; see
<a href="https://github.com/AFLplusplus/AFLplusplus/blob/stable/docs/../instrumentation/README.llvm.md">instrumentation/README.llvm.md</a>.</p>
<p>H.+I. Alternative coverage based on previous edges (NGRAM) or depending on the
caller (CTX), based on
<a href="https://www.usenix.org/system/files/raid2019-wang-jinghan.pdf">https://www.usenix.org/system/files/raid2019-wang-jinghan.pdf</a>;
see <a href="https://github.com/AFLplusplus/AFLplusplus/blob/stable/docs/../instrumentation/README.llvm.md">instrumentation/README.llvm.md</a>.</p>
<p>J. An LTO feature that creates a fuzzing dictionary based on comparisons found
during compilation/instrumentation. Automatic feature :) See
<a href="https://github.com/AFLplusplus/AFLplusplus/blob/stable/docs/../instrumentation/README.lto.md">instrumentation/README.lto.md</a></p>
<p>K. The snapshot feature requires a kernel module that was a lot of work to get
right and maintained so it is no longer supported. We have
<a href="https://github.com/AFLplusplus/AFLplusplus/blob/stable/docs/../nyx_mode/README.md">nyx_mode</a> instead.</p>
<p>L. Faster fuzzing and less kernel syscall overhead by in-memory fuzz testcase
delivery, see
<a href="https://github.com/AFLplusplus/AFLplusplus/blob/stable/docs/../instrumentation/README.persistent_mode.md">instrumentation/README.persistent_mode.md</a></p>
<h2 id="more-information-about-instrumentation">More information about instrumentation</h2>
<ol>
<li>Default for LLVM &gt;= 9.0, environment variable for older version due an
efficiency bug in previous llvm versions</li>
<li>GCC creates non-performant code, hence it is disabled in gcc_plugin</li>
<li>With <code>AFL_LLVM_THREADSAFE_INST</code>, disables NeverZero</li>
<li>With pcguard mode and LTO mode for LLVM 11 and newer</li>
<li>Upcoming, development in the branch</li>
<li>Not compatible with LTO instrumentation and needs at least LLVM v4.1</li>
<li>Automatic in LTO mode with LLVM 11 and newer, an extra pass for all LLVM
versions that write to a file to use with afl-fuzz&rsquo; <code>-x</code></li>
<li>The snapshot LKM is currently unmaintained due to too many kernel changes
coming too fast :-(</li>
<li>FRIDA mode is supported on Linux and MacOS for Intel and ARM</li>
<li>QEMU/Unicorn is only supported on Linux</li>
<li>Coresight mode is only available on AARCH64 Linux with a CPU with Coresight
extension</li>
<li>Nyx mode is only supported on Linux and currently restricted to x86_x64</li>
</ol>
<h2 id="integrated-features-and-patches">Integrated features and patches</h2>
<p>Among others, the following features and patches have been integrated:</p>
<ul>
<li>NeverZero patch for afl-gcc, instrumentation, QEMU mode and unicorn_mode which
prevents a wrapping map value to zero, increases coverage</li>
<li>Persistent mode, deferred forkserver and in-memory fuzzing for QEMU mode</li>
<li>Unicorn mode which allows fuzzing of binaries from completely different
platforms (integration provided by domenukk)</li>
<li>The new CmpLog instrumentation for LLVM and QEMU inspired by
<a href="https://github.com/RUB-SysSec/redqueen">Redqueen</a></li>
<li>Win32 PE binary-only fuzzing with QEMU and Wine</li>
<li>AFLfast&rsquo;s power schedules by Marcel Böhme:
<a href="https://github.com/mboehme/aflfast">https://github.com/mboehme/aflfast</a></li>
<li>The MOpt mutator:
<a href="https://github.com/puppet-meteor/MOpt-AFL">https://github.com/puppet-meteor/MOpt-AFL</a></li>
<li>LLVM mode Ngram coverage by Adrian Herrera
<a href="https://github.com/adrianherrera/afl-ngram-pass">https://github.com/adrianherrera/afl-ngram-pass</a></li>
<li>LAF-Intel/CompCov support for instrumentation, QEMU mode and unicorn_mode
(with enhanced capabilities)</li>
<li>Radamsa and honggfuzz mutators (as custom mutators).</li>
<li>QBDI mode to fuzz android native libraries via Quarkslab&rsquo;s
<a href="https://github.com/QBDI/QBDI">QBDI</a> framework</li>
<li>Frida and ptrace mode to fuzz binary-only libraries, etc.</li>
</ul>
<p>So all in all this is the best-of AFL that is out there :-)</p>
</article>
 

      <footer class="book-footer">
        
  <div class="flex justify-between">





</div>

 
        
  
  <div class="book-comments">

</div>
  
 
      </footer>
      
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#features-and-instrumentation">Features and instrumentation</a></li>
    <li><a href="#more-information-about-features">More information about features</a></li>
    <li><a href="#more-information-about-instrumentation">More information about instrumentation</a></li>
    <li><a href="#integrated-features-and-patches">Integrated features and patches</a></li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












